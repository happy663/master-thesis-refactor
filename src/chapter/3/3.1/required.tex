


% とりあえずコメントアウト

% \section{要求補正情報}
% % TODO: 3.要求仕様ではなく要求補正情報の方がよさそう．要求仕様にするなら，柔軟性をもたせる設計にするとか書く必要がありそう．
% % TODO: 3.要求仕様にしてこういう設計である必要があるという主張がいると思う．要求補正情報はおかしい
% % TODO: これではまずい
%
%
% PDRと他の情報を使ってライブラリを作成する上で，
% どのような状況や環境が存在し補正に利用できるのかその具体的な例を考える必要がある．
% 例えば大学内や病院などのWi-FiのAPが多く設置されている場所では，
% Wi-Fiの電波強度を利用した位置推定が有効である．
% 他の例として展示会場や大きなアトリウムなどの広い開放空間が考えられる．
% このような場所ではWi-FiのAPの配置が難しく，
% 信号のカバレッジが不均一になりやすくWi-Fiを利用した位置推定は難しい．
% このような場所の場合BLEビーコンを配置してその電波強度を利用した位置推定が有効である．
% また2章で示したように\cite{pdr-wifi}\cite{pdr-ble}などのPDRと電波を利用した推定に関する研究は盛んに行われている．
% このように電波を使った手法は多くの場所で有効であり，補正に利用可能な情報として重要度が高い．
% そのため本ライブラリにおいても採用を行う．
% 他に補正に利用可能な情報としてフロアマップ情報がある．
% フロアマップ情報は多くの場所で比較的入手が容易だと思われる．
% そのため本ライブラリにおいても採用を行う．
%
% 磁気やカメラなどの情報は，磁気はデータが繊細であり電波と比べると補正に利用する難易度が高い，
% カメラはプライバシーなどの問題があり本ライブラリの基礎段階においてこれらを採用しない．
% また気圧センサは基礎段階として3次元空間を推定対象としないため採用しない．

\section{要求仕様}

屋内環境における位置推定システムの開発には，環境条件と利用可能な補正情報の多様性を考慮する必要がある．
本節では，様々な状況に適応可能なPDRベースのライブラリを構築するための要求仕様について述べる．


\subsection{補正情報の分類と優先度}

位置推定の補正に利用可能な情報は，その特性と入手可能性から2つに分類できる．
まず基本となるのはセンサ情報であり，これはスマートフォンなどの端末に搭載されたセンサから得られる情報である．
加速度センサとジャイロセンサはPDRの基本処理に必須であり，気圧センサは階層判定による3次元位置推定を可能にする重要な情報源となる．
これらのセンサ情報は，端末が利用可能である限り常に取得できる特徴がある．

次に重要なのが環境情報である．
これは建物やその中に設置されたインフラに関連する情報を指す．
フロアマップはもっとも代表的な環境情報であり，多くの施設で比較的容易に入手可能である．
フロアマップは歩行可能な領域の制約として機能し，PDRの累積誤差を抑制する有効な手段となる．
また，Wi-FiアクセスポイントやBLEビーコンからの電波強度情報も重要な環境情報である．
特にBLEビーコンは必要に応じて追加設置が可能であり，位置推定の補正に柔軟に活用できる．

本ライブラリの開発にあたり，
磁気センサやカメラなど他の情報源の活用も検討したが，現段階では採用しない．
磁気センサによる位置推定は，建物内の磁場が環境変化の影響を受けやすく，安定した補正情報として扱うのが難しい．
またカメラを用いた視覚的な位置推定は高い精度が期待できるものの，プライバシーへの配慮が必要となり，汎用的なライブラリとしての採用には課題がある．
これらの技術は将来的な拡張可能性として考慮しつつ，現時点では基本的なセンサ情報と環境情報に焦点を当てた設計とする．

\subsection{システム要件}

また，拡張性も重要な要件である．新たな補正アルゴリズムやセンサ情報を容易に追加できる設計とする必要がある．
将来的な機能拡張としては，磁気センサによるフィンガープリント，Wi-Fiによる測位，気圧センサによる階層判定など，
様々なセンサ情報や手法の追加が考えられる．
% TODO 2. 下の文はいらない気がする
% 特に3次元位置推定においては，垂直方向の移動検知や階層間の遷移検出など，より高度な機能の実装が求められる．
そのため，新たなセンサ情報や補正アルゴリズムを
追加する際に，既存のシステムに大きな変更を加えることなく実装できる設計が重要となる．

さらに，システムの堅牢性も確保しなければならない．
特定の補正情報が利用できない状況でも，
基本的なPDR処理は継続して機能する設計とする．
また，複数の補正情報が利用可能な場合は，
それらを統合して精度向上を図る機能を提供する必要がある．

\subsection{設計方針}

これらの要件を満たすため，以下のような設計方針を採用する．
まず，階層的な補正処理を基本とする．PDRによる基本的な位置推定をベースとし，利用可能な補正情報に応じて段階的に精度を向上させる設計とする．
これにより，環境条件の変化に柔軟に対応できる．

また，標準化されたインターフェースの採用も重要である．各補正モジュールは統一されたインターフェースを通じて連携し，新たな補正処理の追加や既存処理の組み合わせを容易にする．
また，3次元位置推定のための機能拡張も同様のインターフェースで実現できるようにする．

最後に，設定の柔軟性を確保する．補正処理のパラメータや使用する補正情報の組み合わせを，実行時に設定できる機能を提供する．
これにより，個々の環境に最適化された位置推定システムの構築を支援する．

