


\chapter{関連研究}


% TODO:3.大きめの図を入れてもいいかもしれない
% TODO 屋内位置推定は範囲が広すぎる

%TODO 屋内位置推定手法に関する研究は範囲が広すぎる
\section{屋内位置推定手法に関する研究}

屋内位置推定手法は，その推定手法によって大きく絶対位置推定と相対位置推定に分類される．絶対位置推定は特定の基準点からの情報を元に位置を推定する手法であり，BluetoothやWi-Fiなどの電波を利用した手法が代表的である．これらの電波を利用した推定手法はさらにTriangulation方式，FP方式，Proximity方式の3つに分類され\cite{wireless-lan-summary}，それぞれが特徴的な利点と課題を持つ．各手法は単独での使用よりも，複数の手法を組み合わせによって，より高精度な位置推定を実現できる．

Triangulation方式は，屋内に設置した複数のBLEビーコンからの電波強度を利用して三角測量を行い位置推定を実現する手法である．この方式では，少なくとも3つの異なる基準点からの距離情報が必要となり，各基準点からの距離は受信信号強度（RSSI）に基づいて推定される\cite{ble-indoor}．しかし，RSSIは環境のノイズや遮蔽物の影響を受けやすく，その結果として位置推定の精度が低下する課題がある．この課題に対して，カルマンフィルタを用いてRSSIの変動を補正する手法\cite{triangulation-kalman}や，複数のビーコンからの信号を組み合わせて精度を向上させる手法\cite{ble-tandem}が提案されている．

FP方式は特定地点でのアクセスポイント（以下，AP）からの電波強度モデルを作成し，実際の測定値とモデルの照合により位置を推定する．この方式は事前に作成した電波強度の分布モデル（電波強度マップ）を利用するため，理論的には高精度な位置推定が可能である．しかし，モデル作成には膨大なデータ収集が必要となり，さらに環境の変化によってモデルの信頼性が低下する課題がある．これらの問題に対して，ガウス混合モデルを用いて効率的なモデリングを行う手法\cite{gaussian-mixture-model}や，環境変化に適応的なモデル更新手法\cite{fingerprint-auto-update}，ドメイン適応を用いてモデルの汎化性能を向上させる手法\cite{wi-fi-fingerprint-domain}などが提案されている．また，データ収集コストを削減するために，測定点を間引いた疎なデータから補間によって電波強度マップを生成する手法\cite{wireless-lan-cost-reduction}も研究されている．

Proximity方式は，特定のAPからの強い電波受信をトリガーとして位置を推定する比較的単純な手法である．この方式は実装が容易で計算コストが低い利点を持つが，精度は他の手法と比較して劣る傾向にある．しかし，FP方式との組み合わせによって，より効率的な位置推定が可能となる．例えば，Proximity方式とFP方式を併用した研究\cite{proximity-fingerprint}では，Wi-FiのFP方式による位置推定の前に有用なAPの絞り込みを行い，計算コストの削減と精度向上を同時に実現している．

電波以外の推定手法として，建物内の磁場の分布を利用する手法\cite{pdr-mag}，赤外線センサを用いた手法\cite{infrared}，カメラによる画像認識を用いた手法\cite{camera}なども提案されている．磁気データを用いた手法は，建物の構造体による磁場の歪みを位置推定に利用するため，追加のインフラ整備が不要な利点を持つ．一方，画像認識を用いた手法は高精度な位置推定が可能だが，カメラの設置や画像処理の計算コストが課題となる．

PDRと絶対位置推定を組み合わせた手法も数多く提案されている．PDRは相対位置推定手法であるため，初期位置の特定や誤差の蓄積の課題を持つ．特に，ジャイロセンサのドリフト誤差や歩幅推定の誤差は，時間の経過とともに蓄積され，位置推定の精度を著しく低下させる．これらの課題に対して，Wi-FiやBLEビーコンの電波強度を利用してPDRを補正する手法が研究されている．例えば，PDRとWi-Fiの受信強度を用いたProximity位置推定を組み合わせた手法\cite{pdr-wifi}では，Wi-Fi信号強度が特定の閾値を超えた際にPDRの軌跡を補正し，累積誤差の低減を実現している．また，BLEビーコンの受信信号強度の変異を利用した移動変位推定とPDRを併用する手法\cite{pdr-ble}も提案されており，これらの研究では電波強度の変化パターンを解析し，より正確な移動距離の推定を実現している．

建物の構造情報を利用する手法として，PDRとマップマッチングを組み合わせた研究\cite{pdr-map}が提案されている．この手法では，建物の間取り情報から歩行可能な領域を定義し，PDRによって推定された軌跡がその領域内に収まるように補正を行う．さらに，歩行者の動きと建物の構造の関係性から，歩幅の動的な更新や進行方向の補正なども実現している．また，3次元の位置推定として，気圧センサを組み合わせてフロア間移動の推定を行う研究\cite{pdr-wifi}\cite{pdr-stable}も提案されている．これらの研究では，気圧の変化パターンから階段やエレベーターでの移動を検出し，フロア間の移動の高精度な推定を可能としている．

しかしながら，これらの既存研究は特定の環境や条件下での精度向上に焦点を当てており，様々な環境や状況に柔軟に対応できる汎用的なライブラリの開発の観点は十分とは言えない．また，異なる位置推定手法を統合的に扱うためのフレームワークや，環境の変化に適応的に対応できるシステムの設計指針も十分に確立されていない．本研究では，PDRを基盤としながら，電波強度を用いた補正，マップマッチングによる補正，さらには初期位置や終了位置など様々な情報源からの補正を統合的に扱えるライブラリの開発を目指す．このアプローチにより，既存手法の長所を活かしつつ，より柔軟で実用的な屋内位置推定システムの実現を図る．特に，補正手法の組み合わせや切り替えを容易に行えるインターフェースの設計や，各手法の特性を考慮した最適な統合方法の検討に重点を置く．


\section{PDRをベースとしたライブラリ}

PDRライブラリとして，OpenShoe\cite{openshoe}が挙げられる．
OpenShoeはフットマウントIMUを用いたPDRシステムのオープンソースライブラリであり，
足の動きの直接計測によって高精度な歩行軌跡の推定を実現している．
特徴的な点として，Zero Velocity Update (ZUPT)と呼ばれる手法を採用しており，
足が地面に着地した際の速度がゼロになる制約を活用して累積誤差を抑制している．
また，拡張カルマンフィルタを用いた状態推定により，センサのバイアス誤差や
ドリフト誤差を補正している．しかし，このライブラリはフットマウントIMU
という特殊なデバイスに依存しており，スマートフォンなど一般的なデバイスでの
利用は想定されていない．

PDR Plus\cite{pdr-plus}は産総研発スタートアップであるサイトセンシングが
提供しているAndroid端末向けの自律航法測位システムである．このライブラリは
スマートフォンの内蔵センサから取得できる加速度，角速度，磁気の情報を用いて，
姿勢推定，方位補正，移動検出，進行方向を推定する．さらに特徴的な点として，
BLEビーコンやフロアマップなどの環境情報を統合して最終的な位置推定を行う
機能を提供している．ただし，このライブラリはAndroid端末に特化した実装と
なっており，他のプラットフォームでの利用は困難である．

% TODO 3. indoor-atlasを参考文献に追加する
また，IndoorAtlas\cite{indoor-atlas}は磁気フィンガープリントを主な特徴
とする商用の屋内位置測位SDKである．このSDKはPDRに加えて，建物固有の
磁場パターンの活用により，高精度な位置推定を実現している．しかし，
商用ライブラリであるため，カスタマイズや拡張が制限されており，研究目的
での利用や新しい手法の実装が困難である．

これらの既存ライブラリに共通する課題として，特定のデバイスやプラット
フォームへの依存性が高く，様々な環境や状況に応じた補正の適用が困難である点が挙げられる．
本研究で開発するライブラリは，これらの課題に
対処するため，プラットフォームに依存しないPythonを実装言語として採用し，
モジュール化された設計による高い拡張性を実現する．さらに，環境情報や
補正手法を柔軟に組み合わせられる構造を採用し，オープンソースとして
提供し，研究利用の促進を図る．これらの特徴により，様々な
研究や実用的なアプリケーションでの活用が期待できる．




